"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/tour";
exports.ids = ["pages/api/tour"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftour&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftour%2Findex.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftour&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftour%2Findex.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_tour_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/tour/index.js */ \"(api-node)/./src/pages/api/tour/index.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_tour_index_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_tour_index_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/tour\",\n        pathname: \"/api/tour\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _src_pages_api_tour_index_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGdG91ciZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyUyRnBhZ2VzJTJGYXBpJTJGdG91ciUyRmluZGV4LmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNFO0FBQzFEO0FBQzBEO0FBQzFEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx5REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMseURBQVE7QUFDcEM7QUFDTyx3QkFBd0IseUdBQW1CO0FBQ2xEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmMvcGFnZXMvYXBpL3RvdXIvaW5kZXguanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3RvdXJcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS90b3VyXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftour&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftour%2Findex.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./src/pages/api/tour/index.js":
/*!*************************************!*\
  !*** ./src/pages/api/tour/index.js ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _utils_dbConnect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/dbConnect */ \"(api-node)/./src/utils/dbConnect.js\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n// createTour API endpoint\n// POST request to create a new tour\n// Required fields: user_id, tour_name, city, artworks\n\n\nasync function handler(req, res) {\n    if (req.method === \"GET\") {\n        try {\n            // GET all tours\n            const { limit = 20, page = 1, city, visibility = \"public\" } = req.query;\n            const skip = (parseInt(page) - 1) * parseInt(limit);\n            const mongooseInstance = await (0,_utils_dbConnect__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n            const db = mongooseInstance.connection.db;\n            // Build query\n            const query = {};\n            if (city) {\n                query.city = city;\n            }\n            if (visibility) {\n                query.visibility = visibility;\n            }\n            // Get total count\n            const totalCount = await db.collection(\"tours\").countDocuments(query);\n            // Get tours with pagination\n            const tours = await db.collection(\"tours\").find(query).sort({\n                created_at: -1\n            }).skip(skip).limit(parseInt(limit)).toArray();\n            return res.status(200).json({\n                tours,\n                count: tours.length,\n                pagination: {\n                    total: totalCount,\n                    page: parseInt(page),\n                    limit: parseInt(limit),\n                    pages: Math.ceil(totalCount / parseInt(limit))\n                }\n            });\n        } catch (error) {\n            console.error(\"Error fetching tours:\", error);\n            return res.status(500).json({\n                error: error.message\n            });\n        }\n    } else if (req.method === \"POST\") {\n        try {\n            const { user_id, tour_name, city, description, artworks, visibility } = req.body;\n            console.log('[API] Creating tour with data:', {\n                user_id,\n                tour_name,\n                city,\n                artworksCount: artworks?.length || 0,\n                visibility\n            });\n            if (!user_id || !tour_name || !city || !artworks) {\n                return res.status(400).json({\n                    error: \"Missing required fields\"\n                });\n            }\n            // Establish connection and get the DB object\n            console.log('[API] Connecting to MongoDB for tour creation...');\n            const mongooseInstance = await (0,_utils_dbConnect__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n            const db = mongooseInstance.connection.db;\n            console.log('[API] Connected to database:', db.databaseName);\n            // Process artwork IDs to ensure they're valid\n            const processedArtworks = [];\n            // Check if artworks exist before creating the tour\n            for (const id of artworks){\n                // First try as string ID\n                let artwork = await db.collection(\"arts\").findOne({\n                    _id: id\n                });\n                // If not found and looks like ObjectId, try converting\n                if (!artwork && id.length === 24 && /^[0-9a-fA-F]{24}$/.test(id)) {\n                    try {\n                        const objectId = new mongodb__WEBPACK_IMPORTED_MODULE_1__.ObjectId(id);\n                        artwork = await db.collection(\"arts\").findOne({\n                            _id: objectId\n                        });\n                        if (artwork) {\n                            processedArtworks.push(objectId);\n                            continue;\n                        }\n                    } catch (err) {\n                        console.warn(`Invalid artwork ID format: ${id}`);\n                    }\n                }\n                // If found as string, use as is\n                if (artwork) {\n                    processedArtworks.push(id);\n                }\n            }\n            if (processedArtworks.length === 0) {\n                return res.status(400).json({\n                    error: \"No valid artwork IDs provided\"\n                });\n            }\n            const newTour = {\n                user_id,\n                tour_name,\n                city,\n                description: description || \"\",\n                artworks: processedArtworks,\n                created_at: new Date(),\n                last_updated: new Date(),\n                visibility: visibility || \"public\"\n            };\n            console.log('[API] Saving new tour to database:', {\n                tourName: newTour.tour_name,\n                city: newTour.city,\n                artworksCount: newTour.artworks.length\n            });\n            const result = await db.collection(\"tours\").insertOne(newTour);\n            console.log('[API] Tour saved successfully with ID:', result.insertedId);\n            // Try to update user record if users collection exists\n            try {\n                const collections = await db.listCollections({\n                    name: \"users\"\n                }).toArray();\n                if (collections.length > 0) {\n                    // Update or create user record\n                    console.log('[API] Updating user record for user_id:', user_id);\n                    await db.collection(\"users\").updateOne({\n                        user_id: user_id\n                    }, {\n                        $addToSet: {\n                            created_tours: result.insertedId\n                        },\n                        $setOnInsert: {\n                            username: user_id,\n                            profile_created_at: new Date()\n                        }\n                    }, {\n                        upsert: true\n                    });\n                    console.log('[API] User record updated successfully');\n                }\n            } catch (userError) {\n                console.warn(\"Could not update user record:\", userError.message);\n            }\n            return res.status(201).json({\n                message: \"Tour created\",\n                tour: {\n                    ...newTour,\n                    _id: result.insertedId\n                }\n            });\n        } catch (error) {\n            console.error(\"Error creating tour:\", error);\n            return res.status(500).json({\n                error: error.message\n            });\n        }\n    } else {\n        res.setHeader(\"Allow\", [\n            \"GET\",\n            \"POST\"\n        ]);\n        return res.status(405).json({\n            error: `Method ${req.method} Not Allowed`\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM7SUFDMUU7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2tvYmJ5L0Rlc2t0b3AvY3M0MzAvQXJ0aXZpc20vc3JjL3BhZ2VzL2FwaS90b3VyL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNyZWF0ZVRvdXIgQVBJIGVuZHBvaW50XG4vLyBQT1NUIHJlcXVlc3QgdG8gY3JlYXRlIGEgbmV3IHRvdXJcbi8vIFJlcXVpcmVkIGZpZWxkczogdXNlcl9pZCwgdG91cl9uYW1lLCBjaXR5LCBhcnR3b3Jrc1xuaW1wb3J0IGNvbm5lY3RUb0RCIGZyb20gXCIuLi8uLi8uLi91dGlscy9kYkNvbm5lY3RcIjtcbmltcG9ydCB7IE9iamVjdElkIH0gZnJvbSBcIm1vbmdvZGJcIjtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICBpZiAocmVxLm1ldGhvZCA9PT0gXCJHRVRcIikge1xuICAgIHRyeSB7XG4gICAgICAvLyBHRVQgYWxsIHRvdXJzXG4gICAgICBjb25zdCB7IGxpbWl0ID0gMjAsIHBhZ2UgPSAxLCBjaXR5LCB2aXNpYmlsaXR5ID0gXCJwdWJsaWNcIiB9ID0gcmVxLnF1ZXJ5O1xuICAgICAgY29uc3Qgc2tpcCA9IChwYXJzZUludChwYWdlKSAtIDEpICogcGFyc2VJbnQobGltaXQpO1xuICAgICAgXG4gICAgICBjb25zdCBtb25nb29zZUluc3RhbmNlID0gYXdhaXQgY29ubmVjdFRvREIoKTtcbiAgICAgIGNvbnN0IGRiID0gbW9uZ29vc2VJbnN0YW5jZS5jb25uZWN0aW9uLmRiO1xuICAgICAgXG4gICAgICAvLyBCdWlsZCBxdWVyeVxuICAgICAgY29uc3QgcXVlcnkgPSB7fTtcbiAgICAgIGlmIChjaXR5KSB7XG4gICAgICAgIHF1ZXJ5LmNpdHkgPSBjaXR5O1xuICAgICAgfVxuICAgICAgaWYgKHZpc2liaWxpdHkpIHtcbiAgICAgICAgcXVlcnkudmlzaWJpbGl0eSA9IHZpc2liaWxpdHk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEdldCB0b3RhbCBjb3VudFxuICAgICAgY29uc3QgdG90YWxDb3VudCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ0b3Vyc1wiKS5jb3VudERvY3VtZW50cyhxdWVyeSk7XG4gICAgICBcbiAgICAgIC8vIEdldCB0b3VycyB3aXRoIHBhZ2luYXRpb25cbiAgICAgIGNvbnN0IHRvdXJzID0gYXdhaXQgZGIuY29sbGVjdGlvbihcInRvdXJzXCIpXG4gICAgICAgIC5maW5kKHF1ZXJ5KVxuICAgICAgICAuc29ydCh7IGNyZWF0ZWRfYXQ6IC0xIH0pXG4gICAgICAgIC5za2lwKHNraXApXG4gICAgICAgIC5saW1pdChwYXJzZUludChsaW1pdCkpXG4gICAgICAgIC50b0FycmF5KCk7XG4gICAgICAgIFxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgdG91cnMsXG4gICAgICAgIGNvdW50OiB0b3Vycy5sZW5ndGgsXG4gICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICB0b3RhbDogdG90YWxDb3VudCxcbiAgICAgICAgICBwYWdlOiBwYXJzZUludChwYWdlKSxcbiAgICAgICAgICBsaW1pdDogcGFyc2VJbnQobGltaXQpLFxuICAgICAgICAgIHBhZ2VzOiBNYXRoLmNlaWwodG90YWxDb3VudCAvIHBhcnNlSW50KGxpbWl0KSlcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHRvdXJzOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcbiAgICB9XG4gIH0gZWxzZSBpZiAocmVxLm1ldGhvZCA9PT0gXCJQT1NUXCIpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyB1c2VyX2lkLCB0b3VyX25hbWUsIGNpdHksIGRlc2NyaXB0aW9uLCBhcnR3b3JrcywgdmlzaWJpbGl0eSB9ID0gcmVxLmJvZHk7XG4gICAgICBjb25zb2xlLmxvZygnW0FQSV0gQ3JlYXRpbmcgdG91ciB3aXRoIGRhdGE6JywgeyBcbiAgICAgICAgdXNlcl9pZCwgXG4gICAgICAgIHRvdXJfbmFtZSwgXG4gICAgICAgIGNpdHksIFxuICAgICAgICBhcnR3b3Jrc0NvdW50OiBhcnR3b3Jrcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHZpc2liaWxpdHkgXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKCF1c2VyX2lkIHx8ICF0b3VyX25hbWUgfHwgIWNpdHkgfHwgIWFydHdvcmtzKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIk1pc3NpbmcgcmVxdWlyZWQgZmllbGRzXCIgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEVzdGFibGlzaCBjb25uZWN0aW9uIGFuZCBnZXQgdGhlIERCIG9iamVjdFxuICAgICAgY29uc29sZS5sb2coJ1tBUEldIENvbm5lY3RpbmcgdG8gTW9uZ29EQiBmb3IgdG91ciBjcmVhdGlvbi4uLicpO1xuICAgICAgY29uc3QgbW9uZ29vc2VJbnN0YW5jZSA9IGF3YWl0IGNvbm5lY3RUb0RCKCk7XG4gICAgICBjb25zdCBkYiA9IG1vbmdvb3NlSW5zdGFuY2UuY29ubmVjdGlvbi5kYjtcbiAgICAgIGNvbnNvbGUubG9nKCdbQVBJXSBDb25uZWN0ZWQgdG8gZGF0YWJhc2U6JywgZGIuZGF0YWJhc2VOYW1lKTtcbiAgICAgIFxuICAgICAgLy8gUHJvY2VzcyBhcnR3b3JrIElEcyB0byBlbnN1cmUgdGhleSdyZSB2YWxpZFxuICAgICAgY29uc3QgcHJvY2Vzc2VkQXJ0d29ya3MgPSBbXTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgYXJ0d29ya3MgZXhpc3QgYmVmb3JlIGNyZWF0aW5nIHRoZSB0b3VyXG4gICAgICBmb3IgKGNvbnN0IGlkIG9mIGFydHdvcmtzKSB7XG4gICAgICAgIC8vIEZpcnN0IHRyeSBhcyBzdHJpbmcgSURcbiAgICAgICAgbGV0IGFydHdvcmsgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwiYXJ0c1wiKS5maW5kT25lKHsgX2lkOiBpZCB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIElmIG5vdCBmb3VuZCBhbmQgbG9va3MgbGlrZSBPYmplY3RJZCwgdHJ5IGNvbnZlcnRpbmdcbiAgICAgICAgaWYgKCFhcnR3b3JrICYmIGlkLmxlbmd0aCA9PT0gMjQgJiYgL15bMC05YS1mQS1GXXsyNH0kLy50ZXN0KGlkKSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBvYmplY3RJZCA9IG5ldyBPYmplY3RJZChpZCk7XG4gICAgICAgICAgICBhcnR3b3JrID0gYXdhaXQgZGIuY29sbGVjdGlvbihcImFydHNcIikuZmluZE9uZSh7IF9pZDogb2JqZWN0SWQgfSk7XG4gICAgICAgICAgICBpZiAoYXJ0d29yaykge1xuICAgICAgICAgICAgICBwcm9jZXNzZWRBcnR3b3Jrcy5wdXNoKG9iamVjdElkKTtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEludmFsaWQgYXJ0d29yayBJRCBmb3JtYXQ6ICR7aWR9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBJZiBmb3VuZCBhcyBzdHJpbmcsIHVzZSBhcyBpc1xuICAgICAgICBpZiAoYXJ0d29yaykge1xuICAgICAgICAgIHByb2Nlc3NlZEFydHdvcmtzLnB1c2goaWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChwcm9jZXNzZWRBcnR3b3Jrcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiTm8gdmFsaWQgYXJ0d29yayBJRHMgcHJvdmlkZWRcIiB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbmV3VG91ciA9IHtcbiAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgdG91cl9uYW1lLFxuICAgICAgICBjaXR5LFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24gfHwgXCJcIixcbiAgICAgICAgYXJ0d29ya3M6IHByb2Nlc3NlZEFydHdvcmtzLFxuICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBsYXN0X3VwZGF0ZWQ6IG5ldyBEYXRlKCksXG4gICAgICAgIHZpc2liaWxpdHk6IHZpc2liaWxpdHkgfHwgXCJwdWJsaWNcIlxuICAgICAgfTtcblxuICAgICAgY29uc29sZS5sb2coJ1tBUEldIFNhdmluZyBuZXcgdG91ciB0byBkYXRhYmFzZTonLCB7XG4gICAgICAgIHRvdXJOYW1lOiBuZXdUb3VyLnRvdXJfbmFtZSxcbiAgICAgICAgY2l0eTogbmV3VG91ci5jaXR5LFxuICAgICAgICBhcnR3b3Jrc0NvdW50OiBuZXdUb3VyLmFydHdvcmtzLmxlbmd0aFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ0b3Vyc1wiKS5pbnNlcnRPbmUobmV3VG91cik7XG4gICAgICBjb25zb2xlLmxvZygnW0FQSV0gVG91ciBzYXZlZCBzdWNjZXNzZnVsbHkgd2l0aCBJRDonLCByZXN1bHQuaW5zZXJ0ZWRJZCk7XG4gICAgICBcbiAgICAgIC8vIFRyeSB0byB1cGRhdGUgdXNlciByZWNvcmQgaWYgdXNlcnMgY29sbGVjdGlvbiBleGlzdHNcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbGxlY3Rpb25zID0gYXdhaXQgZGIubGlzdENvbGxlY3Rpb25zKHtuYW1lOiBcInVzZXJzXCJ9KS50b0FycmF5KCk7XG4gICAgICAgIGlmIChjb2xsZWN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gVXBkYXRlIG9yIGNyZWF0ZSB1c2VyIHJlY29yZFxuICAgICAgICAgIGNvbnNvbGUubG9nKCdbQVBJXSBVcGRhdGluZyB1c2VyIHJlY29yZCBmb3IgdXNlcl9pZDonLCB1c2VyX2lkKTtcbiAgICAgICAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKFwidXNlcnNcIikudXBkYXRlT25lKFxuICAgICAgICAgICAgeyB1c2VyX2lkOiB1c2VyX2lkIH0sXG4gICAgICAgICAgICB7IFxuICAgICAgICAgICAgICAkYWRkVG9TZXQ6IHsgY3JlYXRlZF90b3VyczogcmVzdWx0Lmluc2VydGVkSWQgfSxcbiAgICAgICAgICAgICAgJHNldE9uSW5zZXJ0OiB7IFxuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyX2lkLFxuICAgICAgICAgICAgICAgIHByb2ZpbGVfY3JlYXRlZF9hdDogbmV3IERhdGUoKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyB1cHNlcnQ6IHRydWUgfVxuICAgICAgICAgICk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1tBUEldIFVzZXIgcmVjb3JkIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKHVzZXJFcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgdXBkYXRlIHVzZXIgcmVjb3JkOlwiLCB1c2VyRXJyb3IubWVzc2FnZSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7IFxuICAgICAgICBtZXNzYWdlOiBcIlRvdXIgY3JlYXRlZFwiLCBcbiAgICAgICAgdG91cjoge1xuICAgICAgICAgIC4uLm5ld1RvdXIsXG4gICAgICAgICAgX2lkOiByZXN1bHQuaW5zZXJ0ZWRJZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNyZWF0aW5nIHRvdXI6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXMuc2V0SGVhZGVyKFwiQWxsb3dcIiwgW1wiR0VUXCIsIFwiUE9TVFwiXSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6IGBNZXRob2QgJHtyZXEubWV0aG9kfSBOb3QgQWxsb3dlZGAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJjb25uZWN0VG9EQiIsIk9iamVjdElkIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsImxpbWl0IiwicGFnZSIsImNpdHkiLCJ2aXNpYmlsaXR5IiwicXVlcnkiLCJza2lwIiwicGFyc2VJbnQiLCJtb25nb29zZUluc3RhbmNlIiwiZGIiLCJjb25uZWN0aW9uIiwidG90YWxDb3VudCIsImNvbGxlY3Rpb24iLCJjb3VudERvY3VtZW50cyIsInRvdXJzIiwiZmluZCIsInNvcnQiLCJjcmVhdGVkX2F0IiwidG9BcnJheSIsInN0YXR1cyIsImpzb24iLCJjb3VudCIsImxlbmd0aCIsInBhZ2luYXRpb24iLCJ0b3RhbCIsInBhZ2VzIiwiTWF0aCIsImNlaWwiLCJlcnJvciIsImNvbnNvbGUiLCJtZXNzYWdlIiwidXNlcl9pZCIsInRvdXJfbmFtZSIsImRlc2NyaXB0aW9uIiwiYXJ0d29ya3MiLCJib2R5IiwibG9nIiwiYXJ0d29ya3NDb3VudCIsImRhdGFiYXNlTmFtZSIsInByb2Nlc3NlZEFydHdvcmtzIiwiaWQiLCJhcnR3b3JrIiwiZmluZE9uZSIsIl9pZCIsInRlc3QiLCJvYmplY3RJZCIsInB1c2giLCJlcnIiLCJ3YXJuIiwibmV3VG91ciIsIkRhdGUiLCJsYXN0X3VwZGF0ZWQiLCJ0b3VyTmFtZSIsInJlc3VsdCIsImluc2VydE9uZSIsImluc2VydGVkSWQiLCJjb2xsZWN0aW9ucyIsImxpc3RDb2xsZWN0aW9ucyIsIm5hbWUiLCJ1cGRhdGVPbmUiLCIkYWRkVG9TZXQiLCJjcmVhdGVkX3RvdXJzIiwiJHNldE9uSW5zZXJ0IiwidXNlcm5hbWUiLCJwcm9maWxlX2NyZWF0ZWRfYXQiLCJ1cHNlcnQiLCJ1c2VyRXJyb3IiLCJ0b3VyIiwic2V0SGVhZGVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/pages/api/tour/index.js\n");

/***/ }),

/***/ "(api-node)/./src/utils/dbConnect.js":
/*!********************************!*\
  !*** ./src/utils/dbConnect.js ***!
  \********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dotenv */ \"dotenv\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! url */ \"url\");\n// import mongoose from \"mongoose\";\n// import dotenv from \"dotenv\";\n// import path from \"path\";\n\n\n\n\n\ndotenv__WEBPACK_IMPORTED_MODULE_1__.config({\n    path: path__WEBPACK_IMPORTED_MODULE_2__.join((0,path__WEBPACK_IMPORTED_MODULE_2__.dirname)((0,url__WEBPACK_IMPORTED_MODULE_3__.fileURLToPath)(\"file:///Users/kobby/Desktop/cs430/Artivism/src/utils/dbConnect.js\")), \"..\", \"..\", \".env\")\n});\n// Get MongoDB URI and ensure it points to the correct database\nlet mongoUri = process.env.MONGO_URI;\nif (!mongoUri) {\n    throw new Error(\"Please define the MONGO_URI environment variable inside .env\");\n}\n// Make sure we're connecting to the 'artivism' database\nif (!mongoUri.includes('/artivism?') && !mongoUri.includes('/artivism/')) {\n    // Add the database name if it's not already in the URI\n    if (mongoUri.includes('/?')) {\n        // Replace the /? with /artivism?\n        mongoUri = mongoUri.replace('/?', '/artivism?');\n    } else if (mongoUri.includes('?')) {\n        // Insert database name before the query parameters\n        mongoUri = mongoUri.replace('?', '/artivism?');\n    } else {\n        // No query parameters, just add the database name\n        mongoUri = `${mongoUri}/artivism`;\n    }\n    console.log(\"Using artivism database\");\n}\nlet cachedMongoObject = global.mongoose;\nif (!cachedMongoObject) {\n    cachedMongoObject = global.mongoose = {\n        connection: null,\n        promise: null\n    };\n}\nasync function connectToDB() {\n    console.log(\"Connecting to DB\");\n    if (cachedMongoObject.connection) {\n        return cachedMongoObject.connection;\n    }\n    if (!cachedMongoObject.promise) {\n        const opts = {\n            bufferCommands: false\n        };\n        try {\n            cachedMongoObject.promise = mongoose__WEBPACK_IMPORTED_MODULE_0__.connect(mongoUri, opts).then((mongoose)=>{\n                return mongoose;\n            });\n            cachedMongoObject.connection = await cachedMongoObject.promise;\n            console.log(\"Success\");\n            return cachedMongoObject.connection;\n        } catch  {\n            throw new Error(\"No Connection\");\n        }\n    }\n}\n// Test\nif (\"file:///Users/kobby/Desktop/cs430/Artivism/src/utils/dbConnect.js\" === `file://${process.argv[1]}`) {\n    connectToDB().then(()=>{\n        console.log(\"Database connection successful\");\n        mongoose__WEBPACK_IMPORTED_MODULE_0__.connection.close(); // Close the connection after testing\n    }).catch((error)=>{\n        console.error(\"Database connection failed:\", error);\n    });\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connectToDB);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy91dGlscy9kYkNvbm5lY3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxtQ0FBbUM7QUFDbkMsK0JBQStCO0FBQy9CLDJCQUEyQjtBQUVLO0FBQ0o7QUFDSjtBQUNPO0FBQ0s7QUFFcENDLDBDQUFhLENBQUM7SUFDWkMsTUFBTUEsc0NBQVMsQ0FBQ0MsNkNBQU9BLENBQUNDLGtEQUFhQSxDQUFDLG1FQUFlLElBQUksTUFBTSxNQUFNO0FBQ3ZFO0FBRUEsK0RBQStEO0FBQy9ELElBQUlJLFdBQVdDLFFBQVFDLEdBQUcsQ0FBQ0MsU0FBUztBQUNwQyxJQUFJLENBQUNILFVBQVU7SUFDYixNQUFNLElBQUlJLE1BQ1I7QUFFSjtBQUVBLHdEQUF3RDtBQUN4RCxJQUFJLENBQUNKLFNBQVNLLFFBQVEsQ0FBQyxpQkFBaUIsQ0FBQ0wsU0FBU0ssUUFBUSxDQUFDLGVBQWU7SUFDeEUsdURBQXVEO0lBQ3ZELElBQUlMLFNBQVNLLFFBQVEsQ0FBQyxPQUFPO1FBQzNCLGlDQUFpQztRQUNqQ0wsV0FBV0EsU0FBU00sT0FBTyxDQUFDLE1BQU07SUFDcEMsT0FBTyxJQUFJTixTQUFTSyxRQUFRLENBQUMsTUFBTTtRQUNqQyxtREFBbUQ7UUFDbkRMLFdBQVdBLFNBQVNNLE9BQU8sQ0FBQyxLQUFLO0lBQ25DLE9BQU87UUFDTCxrREFBa0Q7UUFDbEROLFdBQVcsR0FBR0EsU0FBUyxTQUFTLENBQUM7SUFDbkM7SUFDQU8sUUFBUUMsR0FBRyxDQUFDO0FBQ2Q7QUFFQSxJQUFJQyxvQkFBb0JDLE9BQU9sQixRQUFRO0FBQ3ZDLElBQUksQ0FBQ2lCLG1CQUFtQjtJQUN0QkEsb0JBQW9CQyxPQUFPbEIsUUFBUSxHQUFHO1FBQUVtQixZQUFZO1FBQU1DLFNBQVM7SUFBSztBQUMxRTtBQUVBLGVBQWVDO0lBQ2JOLFFBQVFDLEdBQUcsQ0FBQztJQUNaLElBQUlDLGtCQUFrQkUsVUFBVSxFQUFFO1FBQ2hDLE9BQU9GLGtCQUFrQkUsVUFBVTtJQUNyQztJQUVBLElBQUksQ0FBQ0Ysa0JBQWtCRyxPQUFPLEVBQUU7UUFDOUIsTUFBTUUsT0FBTztZQUFFQyxnQkFBZ0I7UUFBTTtRQUNyQyxJQUFJO1lBQ0ZOLGtCQUFrQkcsT0FBTyxHQUFHcEIsNkNBQ2xCLENBQUNRLFVBQVVjLE1BQ2xCRyxJQUFJLENBQUMsQ0FBQ3pCO2dCQUNMLE9BQU9BO1lBQ1Q7WUFDRmlCLGtCQUFrQkUsVUFBVSxHQUFHLE1BQU1GLGtCQUFrQkcsT0FBTztZQUM5REwsUUFBUUMsR0FBRyxDQUFDO1lBQ1osT0FBT0Msa0JBQWtCRSxVQUFVO1FBQ3JDLEVBQUUsT0FBTTtZQUNOLE1BQU0sSUFBSVAsTUFBTTtRQUNsQjtJQUNGO0FBQ0Y7QUFFQSxPQUFPO0FBQ1AsSUFBSSxtRUFBZSxLQUFLLENBQUMsT0FBTyxFQUFFSCxRQUFRaUIsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFO0lBQ25ETCxjQUNHSSxJQUFJLENBQUM7UUFDSlYsUUFBUUMsR0FBRyxDQUFDO1FBQ1poQixnREFBbUIsQ0FBQzJCLEtBQUssSUFBSSxxQ0FBcUM7SUFDcEUsR0FDQ0MsS0FBSyxDQUFDLENBQUNDO1FBQ05kLFFBQVFjLEtBQUssQ0FBQywrQkFBK0JBO0lBQy9DO0FBQ0o7QUFFQSxpRUFBZVIsV0FBV0EsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2tvYmJ5L0Rlc2t0b3AvY3M0MzAvQXJ0aXZpc20vc3JjL3V0aWxzL2RiQ29ubmVjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG4vLyBpbXBvcnQgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcbi8vIGltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbmltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcbmltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGRpcm5hbWUgfSBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgZmlsZVVSTFRvUGF0aCB9IGZyb20gXCJ1cmxcIjtcblxuZG90ZW52LmNvbmZpZyh7XG4gIHBhdGg6IHBhdGguam9pbihkaXJuYW1lKGZpbGVVUkxUb1BhdGgoaW1wb3J0Lm1ldGEudXJsKSksIFwiLi5cIiwgXCIuLlwiLCBcIi5lbnZcIiksXG59KTtcblxuLy8gR2V0IE1vbmdvREIgVVJJIGFuZCBlbnN1cmUgaXQgcG9pbnRzIHRvIHRoZSBjb3JyZWN0IGRhdGFiYXNlXG5sZXQgbW9uZ29VcmkgPSBwcm9jZXNzLmVudi5NT05HT19VUkk7XG5pZiAoIW1vbmdvVXJpKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICBcIlBsZWFzZSBkZWZpbmUgdGhlIE1PTkdPX1VSSSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpbnNpZGUgLmVudlwiXG4gICk7XG59XG5cbi8vIE1ha2Ugc3VyZSB3ZSdyZSBjb25uZWN0aW5nIHRvIHRoZSAnYXJ0aXZpc20nIGRhdGFiYXNlXG5pZiAoIW1vbmdvVXJpLmluY2x1ZGVzKCcvYXJ0aXZpc20/JykgJiYgIW1vbmdvVXJpLmluY2x1ZGVzKCcvYXJ0aXZpc20vJykpIHtcbiAgLy8gQWRkIHRoZSBkYXRhYmFzZSBuYW1lIGlmIGl0J3Mgbm90IGFscmVhZHkgaW4gdGhlIFVSSVxuICBpZiAobW9uZ29VcmkuaW5jbHVkZXMoJy8/JykpIHtcbiAgICAvLyBSZXBsYWNlIHRoZSAvPyB3aXRoIC9hcnRpdmlzbT9cbiAgICBtb25nb1VyaSA9IG1vbmdvVXJpLnJlcGxhY2UoJy8/JywgJy9hcnRpdmlzbT8nKTtcbiAgfSBlbHNlIGlmIChtb25nb1VyaS5pbmNsdWRlcygnPycpKSB7XG4gICAgLy8gSW5zZXJ0IGRhdGFiYXNlIG5hbWUgYmVmb3JlIHRoZSBxdWVyeSBwYXJhbWV0ZXJzXG4gICAgbW9uZ29VcmkgPSBtb25nb1VyaS5yZXBsYWNlKCc/JywgJy9hcnRpdmlzbT8nKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBObyBxdWVyeSBwYXJhbWV0ZXJzLCBqdXN0IGFkZCB0aGUgZGF0YWJhc2UgbmFtZVxuICAgIG1vbmdvVXJpID0gYCR7bW9uZ29Vcml9L2FydGl2aXNtYDtcbiAgfVxuICBjb25zb2xlLmxvZyhcIlVzaW5nIGFydGl2aXNtIGRhdGFiYXNlXCIpO1xufVxuXG5sZXQgY2FjaGVkTW9uZ29PYmplY3QgPSBnbG9iYWwubW9uZ29vc2U7XG5pZiAoIWNhY2hlZE1vbmdvT2JqZWN0KSB7XG4gIGNhY2hlZE1vbmdvT2JqZWN0ID0gZ2xvYmFsLm1vbmdvb3NlID0geyBjb25uZWN0aW9uOiBudWxsLCBwcm9taXNlOiBudWxsIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNvbm5lY3RUb0RCKCkge1xuICBjb25zb2xlLmxvZyhcIkNvbm5lY3RpbmcgdG8gREJcIik7XG4gIGlmIChjYWNoZWRNb25nb09iamVjdC5jb25uZWN0aW9uKSB7XG4gICAgcmV0dXJuIGNhY2hlZE1vbmdvT2JqZWN0LmNvbm5lY3Rpb247XG4gIH1cblxuICBpZiAoIWNhY2hlZE1vbmdvT2JqZWN0LnByb21pc2UpIHtcbiAgICBjb25zdCBvcHRzID0geyBidWZmZXJDb21tYW5kczogZmFsc2UgfTtcbiAgICB0cnkge1xuICAgICAgY2FjaGVkTW9uZ29PYmplY3QucHJvbWlzZSA9IG1vbmdvb3NlXG4gICAgICAgIC5jb25uZWN0KG1vbmdvVXJpLCBvcHRzKVxuICAgICAgICAudGhlbigobW9uZ29vc2UpID0+IHtcbiAgICAgICAgICByZXR1cm4gbW9uZ29vc2U7XG4gICAgICAgIH0pO1xuICAgICAgY2FjaGVkTW9uZ29PYmplY3QuY29ubmVjdGlvbiA9IGF3YWl0IGNhY2hlZE1vbmdvT2JqZWN0LnByb21pc2U7XG4gICAgICBjb25zb2xlLmxvZyhcIlN1Y2Nlc3NcIik7XG4gICAgICByZXR1cm4gY2FjaGVkTW9uZ29PYmplY3QuY29ubmVjdGlvbjtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIENvbm5lY3Rpb25cIik7XG4gICAgfVxuICB9XG59XG5cbi8vIFRlc3RcbmlmIChpbXBvcnQubWV0YS51cmwgPT09IGBmaWxlOi8vJHtwcm9jZXNzLmFyZ3ZbMV19YCkge1xuICBjb25uZWN0VG9EQigpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJEYXRhYmFzZSBjb25uZWN0aW9uIHN1Y2Nlc3NmdWxcIik7XG4gICAgICBtb25nb29zZS5jb25uZWN0aW9uLmNsb3NlKCk7IC8vIENsb3NlIHRoZSBjb25uZWN0aW9uIGFmdGVyIHRlc3RpbmdcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZDpcIiwgZXJyb3IpO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0VG9EQjtcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsImRvdGVudiIsInBhdGgiLCJkaXJuYW1lIiwiZmlsZVVSTFRvUGF0aCIsImNvbmZpZyIsImpvaW4iLCJ1cmwiLCJtb25nb1VyaSIsInByb2Nlc3MiLCJlbnYiLCJNT05HT19VUkkiLCJFcnJvciIsImluY2x1ZGVzIiwicmVwbGFjZSIsImNvbnNvbGUiLCJsb2ciLCJjYWNoZWRNb25nb09iamVjdCIsImdsb2JhbCIsImNvbm5lY3Rpb24iLCJwcm9taXNlIiwiY29ubmVjdFRvREIiLCJvcHRzIiwiYnVmZmVyQ29tbWFuZHMiLCJjb25uZWN0IiwidGhlbiIsImFyZ3YiLCJjbG9zZSIsImNhdGNoIiwiZXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/utils/dbConnect.js\n");

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftour&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftour%2Findex.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();