"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/tour/[id]";
exports.ids = ["pages/api/tour/[id]"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftour%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftour%2F%5Bid%5D.js&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftour%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftour%2F%5Bid%5D.js&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_tour_id_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/tour/[id].js */ \"(api-node)/./src/pages/api/tour/[id].js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_tour_id_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_tour_id_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/tour/[id]\",\n        pathname: \"/api/tour/[id]\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _src_pages_api_tour_id_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGdG91ciUyRiU1QmlkJTVEJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTJGcGFnZXMlMkZhcGklMkZ0b3VyJTJGJTVCaWQlNUQuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDeUQ7QUFDekQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHNEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxzREFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyYy9wYWdlcy9hcGkvdG91ci9baWRdLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS90b3VyL1tpZF1cIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS90b3VyL1tpZF1cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftour%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftour%2F%5Bid%5D.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./src/db/mongodb.js":
/*!***************************!*\
  !*** ./src/db/mongodb.js ***!
  \***************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dotenv */ \"dotenv\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! url */ \"url\");\n// import mongoose from \"mongoose\";\n// import dotenv from \"dotenv\";\n// import path from \"path\";\n\n\n\n\n\ndotenv__WEBPACK_IMPORTED_MODULE_1__.config({\n    path: path__WEBPACK_IMPORTED_MODULE_2__.join((0,path__WEBPACK_IMPORTED_MODULE_2__.dirname)((0,url__WEBPACK_IMPORTED_MODULE_3__.fileURLToPath)(\"file:///Users/kobby/Desktop/cs430/Artivism/src/db/mongodb.js\")), \"..\", \"..\", \".env\")\n});\n// Check for either MONGO_URI or MONGODB_URI (for compatibility)\nconst mongoUri = process.env.MONGO_URI || process.env.MONGODB_URI;\nif (!mongoUri) {\n    throw new Error(\"Please define the MONGO_URI environment variable inside .env\");\n}\nlet cachedMongoObject = global.mongoose;\nif (!cachedMongoObject) {\n    cachedMongoObject = global.mongoose = {\n        connection: null,\n        promise: null\n    };\n}\nasync function connectToDB() {\n    if (cachedMongoObject.connection) {\n        return cachedMongoObject.connection;\n    }\n    if (!cachedMongoObject.promise) {\n        const opts = {\n            bufferCommands: false\n        };\n        try {\n            cachedMongoObject.promise = mongoose__WEBPACK_IMPORTED_MODULE_0__.connect(mongoUri, opts).then((mongoose)=>{\n                return mongoose;\n            });\n            cachedMongoObject.connection = await cachedMongoObject.promise;\n            console.log(\"Success\");\n            return cachedMongoObject.connection;\n        } catch  {\n            throw new Error(\"No Connection\");\n        }\n    }\n}\n// Test\nif (\"file:///Users/kobby/Desktop/cs430/Artivism/src/db/mongodb.js\" === `file://${process.argv[1]}`) {\n    connectToDB().then(()=>{\n        console.log(\"Database connection successful\");\n        mongoose__WEBPACK_IMPORTED_MODULE_0__.connection.close(); // Close the connection after testing\n    }).catch((error)=>{\n        console.error(\"Database connection failed:\", error);\n    });\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connectToDB);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9kYi9tb25nb2RiLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsbUNBQW1DO0FBQ25DLCtCQUErQjtBQUMvQiwyQkFBMkI7QUFFSztBQUNKO0FBQ0o7QUFDTztBQUNLO0FBRXBDQywwQ0FBYSxDQUFDO0lBQ1pDLE1BQU1BLHNDQUFTLENBQUNDLDZDQUFPQSxDQUFDQyxrREFBYUEsQ0FBQyw4REFBZSxJQUFJLE1BQU0sTUFBTTtBQUN2RTtBQUVBLGdFQUFnRTtBQUNoRSxNQUFNSSxXQUFXQyxRQUFRQyxHQUFHLENBQUNDLFNBQVMsSUFBSUYsUUFBUUMsR0FBRyxDQUFDRSxXQUFXO0FBQ2pFLElBQUksQ0FBQ0osVUFBVTtJQUNiLE1BQU0sSUFBSUssTUFDUjtBQUVKO0FBRUEsSUFBSUMsb0JBQW9CQyxPQUFPZixRQUFRO0FBQ3ZDLElBQUksQ0FBQ2MsbUJBQW1CO0lBQ3RCQSxvQkFBb0JDLE9BQU9mLFFBQVEsR0FBRztRQUFFZ0IsWUFBWTtRQUFNQyxTQUFTO0lBQUs7QUFDMUU7QUFFQSxlQUFlQztJQUNiLElBQUlKLGtCQUFrQkUsVUFBVSxFQUFFO1FBQ2hDLE9BQU9GLGtCQUFrQkUsVUFBVTtJQUNyQztJQUVBLElBQUksQ0FBQ0Ysa0JBQWtCRyxPQUFPLEVBQUU7UUFDOUIsTUFBTUUsT0FBTztZQUFFQyxnQkFBZ0I7UUFBTTtRQUNyQyxJQUFJO1lBQ0ZOLGtCQUFrQkcsT0FBTyxHQUFHakIsNkNBQ2xCLENBQUNRLFVBQVVXLE1BQ2xCRyxJQUFJLENBQUMsQ0FBQ3RCO2dCQUNMLE9BQU9BO1lBQ1Q7WUFDRmMsa0JBQWtCRSxVQUFVLEdBQUcsTUFBTUYsa0JBQWtCRyxPQUFPO1lBQzlETSxRQUFRQyxHQUFHLENBQUM7WUFDWixPQUFPVixrQkFBa0JFLFVBQVU7UUFDckMsRUFBRSxPQUFNO1lBQ04sTUFBTSxJQUFJSCxNQUFNO1FBQ2xCO0lBQ0Y7QUFDRjtBQUVBLE9BQU87QUFDUCxJQUFJLDhEQUFlLEtBQUssQ0FBQyxPQUFPLEVBQUVKLFFBQVFnQixJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUU7SUFDbkRQLGNBQ0dJLElBQUksQ0FBQztRQUNKQyxRQUFRQyxHQUFHLENBQUM7UUFDWnhCLGdEQUFtQixDQUFDMEIsS0FBSyxJQUFJLHFDQUFxQztJQUNwRSxHQUNDQyxLQUFLLENBQUMsQ0FBQ0M7UUFDTkwsUUFBUUssS0FBSyxDQUFDLCtCQUErQkE7SUFDL0M7QUFDSjtBQUVBLGlFQUFlVixXQUFXQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMva29iYnkvRGVza3RvcC9jczQzMC9BcnRpdmlzbS9zcmMvZGIvbW9uZ29kYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG4vLyBpbXBvcnQgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcbi8vIGltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbmltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcbmltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGRpcm5hbWUgfSBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgZmlsZVVSTFRvUGF0aCB9IGZyb20gXCJ1cmxcIjtcblxuZG90ZW52LmNvbmZpZyh7XG4gIHBhdGg6IHBhdGguam9pbihkaXJuYW1lKGZpbGVVUkxUb1BhdGgoaW1wb3J0Lm1ldGEudXJsKSksIFwiLi5cIiwgXCIuLlwiLCBcIi5lbnZcIiksXG59KTtcblxuLy8gQ2hlY2sgZm9yIGVpdGhlciBNT05HT19VUkkgb3IgTU9OR09EQl9VUkkgKGZvciBjb21wYXRpYmlsaXR5KVxuY29uc3QgbW9uZ29VcmkgPSBwcm9jZXNzLmVudi5NT05HT19VUkkgfHwgcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkk7XG5pZiAoIW1vbmdvVXJpKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICBcIlBsZWFzZSBkZWZpbmUgdGhlIE1PTkdPX1VSSSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpbnNpZGUgLmVudlwiXG4gICk7XG59XG5cbmxldCBjYWNoZWRNb25nb09iamVjdCA9IGdsb2JhbC5tb25nb29zZTtcbmlmICghY2FjaGVkTW9uZ29PYmplY3QpIHtcbiAgY2FjaGVkTW9uZ29PYmplY3QgPSBnbG9iYWwubW9uZ29vc2UgPSB7IGNvbm5lY3Rpb246IG51bGwsIHByb21pc2U6IG51bGwgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY29ubmVjdFRvREIoKSB7XG4gIGlmIChjYWNoZWRNb25nb09iamVjdC5jb25uZWN0aW9uKSB7XG4gICAgcmV0dXJuIGNhY2hlZE1vbmdvT2JqZWN0LmNvbm5lY3Rpb247XG4gIH1cblxuICBpZiAoIWNhY2hlZE1vbmdvT2JqZWN0LnByb21pc2UpIHtcbiAgICBjb25zdCBvcHRzID0geyBidWZmZXJDb21tYW5kczogZmFsc2UgfTtcbiAgICB0cnkge1xuICAgICAgY2FjaGVkTW9uZ29PYmplY3QucHJvbWlzZSA9IG1vbmdvb3NlXG4gICAgICAgIC5jb25uZWN0KG1vbmdvVXJpLCBvcHRzKVxuICAgICAgICAudGhlbigobW9uZ29vc2UpID0+IHtcbiAgICAgICAgICByZXR1cm4gbW9uZ29vc2U7XG4gICAgICAgIH0pO1xuICAgICAgY2FjaGVkTW9uZ29PYmplY3QuY29ubmVjdGlvbiA9IGF3YWl0IGNhY2hlZE1vbmdvT2JqZWN0LnByb21pc2U7XG4gICAgICBjb25zb2xlLmxvZyhcIlN1Y2Nlc3NcIik7XG4gICAgICByZXR1cm4gY2FjaGVkTW9uZ29PYmplY3QuY29ubmVjdGlvbjtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIENvbm5lY3Rpb25cIik7XG4gICAgfVxuICB9XG59XG5cbi8vIFRlc3RcbmlmIChpbXBvcnQubWV0YS51cmwgPT09IGBmaWxlOi8vJHtwcm9jZXNzLmFyZ3ZbMV19YCkge1xuICBjb25uZWN0VG9EQigpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJEYXRhYmFzZSBjb25uZWN0aW9uIHN1Y2Nlc3NmdWxcIik7XG4gICAgICBtb25nb29zZS5jb25uZWN0aW9uLmNsb3NlKCk7IC8vIENsb3NlIHRoZSBjb25uZWN0aW9uIGFmdGVyIHRlc3RpbmdcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZDpcIiwgZXJyb3IpO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0VG9EQjtcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsImRvdGVudiIsInBhdGgiLCJkaXJuYW1lIiwiZmlsZVVSTFRvUGF0aCIsImNvbmZpZyIsImpvaW4iLCJ1cmwiLCJtb25nb1VyaSIsInByb2Nlc3MiLCJlbnYiLCJNT05HT19VUkkiLCJNT05HT0RCX1VSSSIsIkVycm9yIiwiY2FjaGVkTW9uZ29PYmplY3QiLCJnbG9iYWwiLCJjb25uZWN0aW9uIiwicHJvbWlzZSIsImNvbm5lY3RUb0RCIiwib3B0cyIsImJ1ZmZlckNvbW1hbmRzIiwiY29ubmVjdCIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwiYXJndiIsImNsb3NlIiwiY2F0Y2giLCJlcnJvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/db/mongodb.js\n");

/***/ }),

/***/ "(api-node)/./src/pages/api/tour/[id].js":
/*!************************************!*\
  !*** ./src/pages/api/tour/[id].js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _db_mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../db/mongodb */ \"(api-node)/./src/db/mongodb.js\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n// edit and delete tour by id\n// Required fields: user_id\n\n\nasync function handler(req, res) {\n    const { id } = req.query;\n    // Convert id to ObjectId\n    let tourObjectId;\n    try {\n        tourObjectId = new mongodb__WEBPACK_IMPORTED_MODULE_1__.ObjectId(id);\n    } catch (err) {\n        return res.status(400).json({\n            error: \"Invalid tour ID format\"\n        });\n    }\n    if (req.method === \"GET\") {\n        try {\n            const mongooseInstance = await (0,_db_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n            const db = mongooseInstance.connection.db;\n            const tour = await db.collection(\"tours\").findOne({\n                _id: tourObjectId\n            });\n            if (!tour) {\n                return res.status(404).json({\n                    error: \"Tour not found\"\n                });\n            }\n            // If tour has artwork IDs, fetch the artwork details\n            if (tour.artworks && tour.artworks.length > 0) {\n                try {\n                    console.log(`[API] Fetching artwork details for tour ${id} with artworks:`, tour.artworks);\n                    // Check available collections\n                    const collections = await db.listCollections().toArray();\n                    const collectionNames = collections.map((c)=>c.name);\n                    console.log(`[API] Available collections:`, collectionNames);\n                    // Determine the correct collection name\n                    let artCollectionName = \"arts\";\n                    if (!collectionNames.includes(\"arts\")) {\n                        const artCollections = collectionNames.filter((name)=>name.toLowerCase().includes(\"art\") && name !== \"tours\");\n                        if (artCollections.length > 0) {\n                            artCollectionName = artCollections[0];\n                            console.log(`[API] Using \"${artCollectionName}\" collection instead of \"arts\"`);\n                        }\n                    }\n                    // Convert string IDs to ObjectIds where needed\n                    const artworkIds = tour.artworks.map((id)=>{\n                        try {\n                            return new mongodb__WEBPACK_IMPORTED_MODULE_1__.ObjectId(id);\n                        } catch (e) {\n                            console.warn(`[API] Could not convert artwork ID to ObjectId: ${id}, error:`, e.message);\n                            return id; // Keep as is if not convertible\n                        }\n                    });\n                    console.log(`[API] Converted artwork IDs:`, artworkIds);\n                    const artworks = await db.collection(artCollectionName).find({\n                        _id: {\n                            $in: artworkIds\n                        }\n                    }).toArray();\n                    console.log(`[API] Found ${artworks.length} artworks:`, artworks.map((art)=>({\n                            id: art._id,\n                            name: art.name\n                        })));\n                    // Add the artwork details to the tour\n                    tour.artwork_details = artworks;\n                    // If we didn't find any artwork details, log a warning\n                    if (artworks.length === 0) {\n                        console.warn(`[API] No artwork details found for the IDs:`, tour.artworks);\n                    } else if (artworks.length < tour.artworks.length) {\n                        console.warn(`[API] Found only ${artworks.length} artworks out of ${tour.artworks.length} requested`);\n                        // Log which artwork IDs were not found\n                        const foundIds = artworks.map((a)=>a._id.toString());\n                        const missingIds = tour.artworks.filter((id)=>!foundIds.includes(id.toString()));\n                        console.warn(`[API] Missing artwork IDs:`, missingIds);\n                    }\n                } catch (error) {\n                    console.warn(\"[API] Could not fetch artwork details:\", error.message);\n                    console.error(error);\n                    // Continue even if artwork details could not be fetched\n                    tour.artwork_details = [];\n                }\n            } else {\n                console.log(`[API] Tour ${id} has no artworks to fetch details for`);\n                tour.artwork_details = [];\n            }\n            return res.status(200).json({\n                tour\n            });\n        } catch (error) {\n            console.error(\"Error fetching tour:\", error);\n            return res.status(500).json({\n                error: error.message\n            });\n        }\n    } else if (req.method === \"PUT\") {\n        try {\n            const { tour_name, visibility, description, city, artworks, user_id } = req.body;\n            // Require user_id for authorization\n            if (!user_id) {\n                return res.status(400).json({\n                    error: \"Missing user_id in request body\"\n                });\n            }\n            const mongooseInstance = await (0,_db_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n            const db = mongooseInstance.connection.db;\n            // First check if user is authorized to edit this tour\n            const tour = await db.collection(\"tours\").findOne({\n                _id: tourObjectId\n            });\n            if (!tour) {\n                return res.status(404).json({\n                    error: \"Tour not found\"\n                });\n            }\n            // Compare tour's user_id with provided user_id for authorization\n            if (tour.user_id.toString() !== user_id.toString()) {\n                return res.status(403).json({\n                    error: \"Unauthorized: This is not your tour\"\n                });\n            }\n            // Build update object with only provided fields\n            let update = {};\n            if (tour_name !== undefined) update.tour_name = tour_name;\n            if (visibility !== undefined) update.visibility = visibility;\n            if (description !== undefined) update.description = description;\n            if (city !== undefined) update.city = city;\n            if (artworks !== undefined) update.artworks = artworks;\n            // Add last_updated timestamp\n            update.last_updated = new Date();\n            const result = await db.collection(\"tours\").updateOne({\n                _id: tourObjectId\n            }, {\n                $set: update\n            });\n            if (result.modifiedCount === 0) {\n                return res.status(404).json({\n                    error: \"No changes made\"\n                });\n            }\n            return res.status(200).json({\n                message: \"Tour updated successfully\"\n            });\n        } catch (error) {\n            console.error(\"Error updating tour:\", error);\n            return res.status(500).json({\n                error: error.message\n            });\n        }\n    } else if (req.method === \"DELETE\") {\n        try {\n            const { user_id } = req.body;\n            if (!user_id) {\n                return res.status(400).json({\n                    error: \"Missing user_id in request body\"\n                });\n            }\n            const mongooseInstance = await (0,_db_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n            const db = mongooseInstance.connection.db;\n            // Check if tour exists and if user is authorized to delete\n            const tour = await db.collection(\"tours\").findOne({\n                _id: tourObjectId\n            });\n            if (!tour) {\n                return res.status(404).json({\n                    error: \"Tour not found\"\n                });\n            }\n            // Compare user_ids for authorization\n            if (tour.user_id.toString() !== user_id.toString()) {\n                return res.status(403).json({\n                    error: \"Unauthorized: This is not your tour\"\n                });\n            }\n            // Delete the tour\n            const result = await db.collection(\"tours\").deleteOne({\n                _id: tourObjectId\n            });\n            if (result.deletedCount === 0) {\n                return res.status(404).json({\n                    error: \"Tour couldn't be deleted\"\n                });\n            }\n            // Also delete any saved instances of this tour\n            try {\n                await db.collection(\"savedTours\").deleteMany({\n                    tour_id: tourObjectId\n                });\n            } catch (error) {\n                console.warn(\"Error cleaning up saved tours:\", error.message);\n            // Continue even if saved tours could not be deleted\n            }\n            return res.status(200).json({\n                message: \"Tour deleted successfully\"\n            });\n        } catch (error) {\n            console.error(\"Error deleting tour:\", error);\n            return res.status(500).json({\n                error: error.message\n            });\n        }\n    } else {\n        res.setHeader(\"Allow\", [\n            \"GET\",\n            \"PUT\",\n            \"DELETE\"\n        ]);\n        return res.status(405).json({\n            error: `Method ${req.method} Not Allowed`\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9wYWdlcy9hcGkvdG91ci9baWRdLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLDZCQUE2QjtBQUM3QiwyQkFBMkI7QUFDbUI7QUFDWDtBQUVwQixlQUFlRSxRQUFRQyxHQUFHLEVBQUVDLEdBQUc7SUFDNUMsTUFBTSxFQUFFQyxFQUFFLEVBQUUsR0FBR0YsSUFBSUcsS0FBSztJQUV4Qix5QkFBeUI7SUFDekIsSUFBSUM7SUFDSixJQUFJO1FBQ0ZBLGVBQWUsSUFBSU4sNkNBQVFBLENBQUNJO0lBQzlCLEVBQUUsT0FBT0csS0FBSztRQUNaLE9BQU9KLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUF5QjtJQUNoRTtJQUVBLElBQUlSLElBQUlTLE1BQU0sS0FBSyxPQUFPO1FBQ3hCLElBQUk7WUFDRixNQUFNQyxtQkFBbUIsTUFBTWIsdURBQVdBO1lBQzFDLE1BQU1jLEtBQUtELGlCQUFpQkUsVUFBVSxDQUFDRCxFQUFFO1lBRXpDLE1BQU1FLE9BQU8sTUFBTUYsR0FBR0csVUFBVSxDQUFDLFNBQVNDLE9BQU8sQ0FBQztnQkFBRUMsS0FBS1o7WUFBYTtZQUV0RSxJQUFJLENBQUNTLE1BQU07Z0JBQ1QsT0FBT1osSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsT0FBTztnQkFBaUI7WUFDeEQ7WUFFQSxxREFBcUQ7WUFDckQsSUFBSUssS0FBS0ksUUFBUSxJQUFJSixLQUFLSSxRQUFRLENBQUNDLE1BQU0sR0FBRyxHQUFHO2dCQUM3QyxJQUFJO29CQUNGQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyx3Q0FBd0MsRUFBRWxCLEdBQUcsZUFBZSxDQUFDLEVBQUVXLEtBQUtJLFFBQVE7b0JBRXpGLDhCQUE4QjtvQkFDOUIsTUFBTUksY0FBYyxNQUFNVixHQUFHVyxlQUFlLEdBQUdDLE9BQU87b0JBQ3RELE1BQU1DLGtCQUFrQkgsWUFBWUksR0FBRyxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFQyxJQUFJO29CQUNuRFIsUUFBUUMsR0FBRyxDQUFDLENBQUMsNEJBQTRCLENBQUMsRUFBRUk7b0JBRTVDLHdDQUF3QztvQkFDeEMsSUFBSUksb0JBQW9CO29CQUN4QixJQUFJLENBQUNKLGdCQUFnQkssUUFBUSxDQUFDLFNBQVM7d0JBQ3JDLE1BQU1DLGlCQUFpQk4sZ0JBQWdCTyxNQUFNLENBQUNKLENBQUFBLE9BQzVDQSxLQUFLSyxXQUFXLEdBQUdILFFBQVEsQ0FBQyxVQUFVRixTQUFTO3dCQUVqRCxJQUFJRyxlQUFlWixNQUFNLEdBQUcsR0FBRzs0QkFDN0JVLG9CQUFvQkUsY0FBYyxDQUFDLEVBQUU7NEJBQ3JDWCxRQUFRQyxHQUFHLENBQUMsQ0FBQyxhQUFhLEVBQUVRLGtCQUFrQiw4QkFBOEIsQ0FBQzt3QkFDL0U7b0JBQ0Y7b0JBRUEsK0NBQStDO29CQUMvQyxNQUFNSyxhQUFhcEIsS0FBS0ksUUFBUSxDQUFDUSxHQUFHLENBQUN2QixDQUFBQTt3QkFDbkMsSUFBSTs0QkFDRixPQUFPLElBQUlKLDZDQUFRQSxDQUFDSTt3QkFDdEIsRUFBRSxPQUFPZ0MsR0FBRzs0QkFDVmYsUUFBUWdCLElBQUksQ0FBQyxDQUFDLGdEQUFnRCxFQUFFakMsR0FBRyxRQUFRLENBQUMsRUFBRWdDLEVBQUVFLE9BQU87NEJBQ3ZGLE9BQU9sQyxJQUFJLGdDQUFnQzt3QkFDN0M7b0JBQ0Y7b0JBRUFpQixRQUFRQyxHQUFHLENBQUMsQ0FBQyw0QkFBNEIsQ0FBQyxFQUFFYTtvQkFFNUMsTUFBTWhCLFdBQVcsTUFBTU4sR0FBR0csVUFBVSxDQUFDYyxtQkFBbUJTLElBQUksQ0FBQzt3QkFDM0RyQixLQUFLOzRCQUFFc0IsS0FBS0w7d0JBQVc7b0JBQ3pCLEdBQUdWLE9BQU87b0JBRVZKLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLFlBQVksRUFBRUgsU0FBU0MsTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUNwREQsU0FBU1EsR0FBRyxDQUFDYyxDQUFBQSxNQUFROzRCQUFFckMsSUFBSXFDLElBQUl2QixHQUFHOzRCQUFFVyxNQUFNWSxJQUFJWixJQUFJO3dCQUFDO29CQUdyRCxzQ0FBc0M7b0JBQ3RDZCxLQUFLMkIsZUFBZSxHQUFHdkI7b0JBRXZCLHVEQUF1RDtvQkFDdkQsSUFBSUEsU0FBU0MsTUFBTSxLQUFLLEdBQUc7d0JBQ3pCQyxRQUFRZ0IsSUFBSSxDQUFDLENBQUMsMkNBQTJDLENBQUMsRUFBRXRCLEtBQUtJLFFBQVE7b0JBQzNFLE9BQU8sSUFBSUEsU0FBU0MsTUFBTSxHQUFHTCxLQUFLSSxRQUFRLENBQUNDLE1BQU0sRUFBRTt3QkFDakRDLFFBQVFnQixJQUFJLENBQUMsQ0FBQyxpQkFBaUIsRUFBRWxCLFNBQVNDLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRUwsS0FBS0ksUUFBUSxDQUFDQyxNQUFNLENBQUMsVUFBVSxDQUFDO3dCQUVwRyx1Q0FBdUM7d0JBQ3ZDLE1BQU11QixXQUFXeEIsU0FBU1EsR0FBRyxDQUFDaUIsQ0FBQUEsSUFBS0EsRUFBRTFCLEdBQUcsQ0FBQzJCLFFBQVE7d0JBQ2pELE1BQU1DLGFBQWEvQixLQUFLSSxRQUFRLENBQUNjLE1BQU0sQ0FBQzdCLENBQUFBLEtBQU0sQ0FBQ3VDLFNBQVNaLFFBQVEsQ0FBQzNCLEdBQUd5QyxRQUFRO3dCQUM1RXhCLFFBQVFnQixJQUFJLENBQUMsQ0FBQywwQkFBMEIsQ0FBQyxFQUFFUztvQkFDN0M7Z0JBQ0YsRUFBRSxPQUFPcEMsT0FBTztvQkFDZFcsUUFBUWdCLElBQUksQ0FBQywwQ0FBMEMzQixNQUFNNEIsT0FBTztvQkFDcEVqQixRQUFRWCxLQUFLLENBQUNBO29CQUNkLHdEQUF3RDtvQkFDeERLLEtBQUsyQixlQUFlLEdBQUcsRUFBRTtnQkFDM0I7WUFDRixPQUFPO2dCQUNMckIsUUFBUUMsR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFbEIsR0FBRyxxQ0FBcUMsQ0FBQztnQkFDbkVXLEtBQUsyQixlQUFlLEdBQUcsRUFBRTtZQUMzQjtZQUVBLE9BQU92QyxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFTTtZQUFLO1FBQ3JDLEVBQUUsT0FBT0wsT0FBTztZQUNkVyxRQUFRWCxLQUFLLENBQUMsd0JBQXdCQTtZQUN0QyxPQUFPUCxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPQSxNQUFNNEIsT0FBTztZQUFDO1FBQ3JEO0lBQ0YsT0FBTyxJQUFJcEMsSUFBSVMsTUFBTSxLQUFLLE9BQU87UUFDL0IsSUFBSTtZQUNGLE1BQU0sRUFBRW9DLFNBQVMsRUFBRUMsVUFBVSxFQUFFQyxXQUFXLEVBQUVDLElBQUksRUFBRS9CLFFBQVEsRUFBRWdDLE9BQU8sRUFBRSxHQUFHakQsSUFBSWtELElBQUk7WUFFaEYsb0NBQW9DO1lBQ3BDLElBQUksQ0FBQ0QsU0FBUztnQkFDWixPQUFPaEQsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsT0FBTztnQkFBa0M7WUFDekU7WUFFQSxNQUFNRSxtQkFBbUIsTUFBTWIsdURBQVdBO1lBQzFDLE1BQU1jLEtBQUtELGlCQUFpQkUsVUFBVSxDQUFDRCxFQUFFO1lBRXpDLHNEQUFzRDtZQUN0RCxNQUFNRSxPQUFPLE1BQU1GLEdBQUdHLFVBQVUsQ0FBQyxTQUFTQyxPQUFPLENBQUM7Z0JBQUVDLEtBQUtaO1lBQWE7WUFDdEUsSUFBSSxDQUFDUyxNQUFNO2dCQUNULE9BQU9aLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVDLE9BQU87Z0JBQWlCO1lBQ3hEO1lBRUEsaUVBQWlFO1lBQ2pFLElBQUlLLEtBQUtvQyxPQUFPLENBQUNOLFFBQVEsT0FBT00sUUFBUU4sUUFBUSxJQUFJO2dCQUNsRCxPQUFPMUMsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsT0FBTztnQkFBc0M7WUFDN0U7WUFFQSxnREFBZ0Q7WUFDaEQsSUFBSTJDLFNBQVMsQ0FBQztZQUNkLElBQUlOLGNBQWNPLFdBQVdELE9BQU9OLFNBQVMsR0FBR0E7WUFDaEQsSUFBSUMsZUFBZU0sV0FBV0QsT0FBT0wsVUFBVSxHQUFHQTtZQUNsRCxJQUFJQyxnQkFBZ0JLLFdBQVdELE9BQU9KLFdBQVcsR0FBR0E7WUFDcEQsSUFBSUMsU0FBU0ksV0FBV0QsT0FBT0gsSUFBSSxHQUFHQTtZQUN0QyxJQUFJL0IsYUFBYW1DLFdBQVdELE9BQU9sQyxRQUFRLEdBQUdBO1lBRTlDLDZCQUE2QjtZQUM3QmtDLE9BQU9FLFlBQVksR0FBRyxJQUFJQztZQUUxQixNQUFNQyxTQUFTLE1BQU01QyxHQUFHRyxVQUFVLENBQUMsU0FBUzBDLFNBQVMsQ0FDbkQ7Z0JBQUV4QyxLQUFLWjtZQUFhLEdBQ3BCO2dCQUFFcUQsTUFBTU47WUFBTztZQUdqQixJQUFJSSxPQUFPRyxhQUFhLEtBQUssR0FBRztnQkFDOUIsT0FBT3pELElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVDLE9BQU87Z0JBQWtCO1lBQ3pEO1lBQ0EsT0FBT1AsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRTZCLFNBQVM7WUFBNEI7UUFDckUsRUFBRSxPQUFPNUIsT0FBTztZQUNkVyxRQUFRWCxLQUFLLENBQUMsd0JBQXdCQTtZQUN0QyxPQUFPUCxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPQSxNQUFNNEIsT0FBTztZQUFDO1FBQ3JEO0lBRUYsT0FBTyxJQUFJcEMsSUFBSVMsTUFBTSxLQUFLLFVBQVU7UUFDbEMsSUFBSTtZQUNGLE1BQU0sRUFBRXdDLE9BQU8sRUFBRSxHQUFHakQsSUFBSWtELElBQUk7WUFDNUIsSUFBSSxDQUFDRCxTQUFTO2dCQUNaLE9BQU9oRCxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUFFQyxPQUFPO2dCQUFrQztZQUN6RTtZQUVBLE1BQU1FLG1CQUFtQixNQUFNYix1REFBV0E7WUFDMUMsTUFBTWMsS0FBS0QsaUJBQWlCRSxVQUFVLENBQUNELEVBQUU7WUFFekMsMkRBQTJEO1lBQzNELE1BQU1FLE9BQU8sTUFBTUYsR0FBR0csVUFBVSxDQUFDLFNBQVNDLE9BQU8sQ0FBQztnQkFBRUMsS0FBS1o7WUFBYTtZQUN0RSxJQUFJLENBQUNTLE1BQU07Z0JBQ1QsT0FBT1osSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsT0FBTztnQkFBaUI7WUFDeEQ7WUFFQSxxQ0FBcUM7WUFDckMsSUFBSUssS0FBS29DLE9BQU8sQ0FBQ04sUUFBUSxPQUFPTSxRQUFRTixRQUFRLElBQUk7Z0JBQ2xELE9BQU8xQyxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUFFQyxPQUFPO2dCQUFzQztZQUM3RTtZQUVBLGtCQUFrQjtZQUNsQixNQUFNK0MsU0FBUyxNQUFNNUMsR0FBR0csVUFBVSxDQUFDLFNBQVM2QyxTQUFTLENBQUM7Z0JBQUUzQyxLQUFLWjtZQUFhO1lBRTFFLElBQUltRCxPQUFPSyxZQUFZLEtBQUssR0FBRztnQkFDN0IsT0FBTzNELElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVDLE9BQU87Z0JBQTJCO1lBQ2xFO1lBRUEsK0NBQStDO1lBQy9DLElBQUk7Z0JBQ0YsTUFBTUcsR0FBR0csVUFBVSxDQUFDLGNBQWMrQyxVQUFVLENBQUM7b0JBQUVDLFNBQVMxRDtnQkFBYTtZQUN2RSxFQUFFLE9BQU9JLE9BQU87Z0JBQ2RXLFFBQVFnQixJQUFJLENBQUMsa0NBQWtDM0IsTUFBTTRCLE9BQU87WUFDNUQsb0RBQW9EO1lBQ3REO1lBRUEsT0FBT25DLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUU2QixTQUFTO1lBQTRCO1FBQ3JFLEVBQUUsT0FBTzVCLE9BQU87WUFDZFcsUUFBUVgsS0FBSyxDQUFDLHdCQUF3QkE7WUFDdEMsT0FBT1AsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBT0EsTUFBTTRCLE9BQU87WUFBQztRQUNyRDtJQUNGLE9BQU87UUFDTG5DLElBQUk4RCxTQUFTLENBQUMsU0FBUztZQUFDO1lBQU87WUFBTztTQUFTO1FBQy9DLE9BQU85RCxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU8sQ0FBQyxPQUFPLEVBQUVSLElBQUlTLE1BQU0sQ0FBQyxZQUFZLENBQUM7UUFBQztJQUMxRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMva29iYnkvRGVza3RvcC9jczQzMC9BcnRpdmlzbS9zcmMvcGFnZXMvYXBpL3RvdXIvW2lkXS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBlZGl0IGFuZCBkZWxldGUgdG91ciBieSBpZFxuLy8gUmVxdWlyZWQgZmllbGRzOiB1c2VyX2lkXG5pbXBvcnQgY29ubmVjdFRvREIgZnJvbSBcIi4uLy4uLy4uL2RiL21vbmdvZGJcIjtcbmltcG9ydCB7IE9iamVjdElkIH0gZnJvbSBcIm1vbmdvZGJcIjtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICBjb25zdCB7IGlkIH0gPSByZXEucXVlcnk7XG4gIFxuICAvLyBDb252ZXJ0IGlkIHRvIE9iamVjdElkXG4gIGxldCB0b3VyT2JqZWN0SWQ7XG4gIHRyeSB7XG4gICAgdG91ck9iamVjdElkID0gbmV3IE9iamVjdElkKGlkKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCB0b3VyIElEIGZvcm1hdFwiIH0pO1xuICB9XG5cbiAgaWYgKHJlcS5tZXRob2QgPT09IFwiR0VUXCIpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbW9uZ29vc2VJbnN0YW5jZSA9IGF3YWl0IGNvbm5lY3RUb0RCKCk7XG4gICAgICBjb25zdCBkYiA9IG1vbmdvb3NlSW5zdGFuY2UuY29ubmVjdGlvbi5kYjtcblxuICAgICAgY29uc3QgdG91ciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ0b3Vyc1wiKS5maW5kT25lKHsgX2lkOiB0b3VyT2JqZWN0SWQgfSk7XG4gICAgICBcbiAgICAgIGlmICghdG91cikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJUb3VyIG5vdCBmb3VuZFwiIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0b3VyIGhhcyBhcnR3b3JrIElEcywgZmV0Y2ggdGhlIGFydHdvcmsgZGV0YWlsc1xuICAgICAgaWYgKHRvdXIuYXJ0d29ya3MgJiYgdG91ci5hcnR3b3Jrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFtBUEldIEZldGNoaW5nIGFydHdvcmsgZGV0YWlscyBmb3IgdG91ciAke2lkfSB3aXRoIGFydHdvcmtzOmAsIHRvdXIuYXJ0d29ya3MpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENoZWNrIGF2YWlsYWJsZSBjb2xsZWN0aW9uc1xuICAgICAgICAgIGNvbnN0IGNvbGxlY3Rpb25zID0gYXdhaXQgZGIubGlzdENvbGxlY3Rpb25zKCkudG9BcnJheSgpO1xuICAgICAgICAgIGNvbnN0IGNvbGxlY3Rpb25OYW1lcyA9IGNvbGxlY3Rpb25zLm1hcChjID0+IGMubmFtZSk7XG4gICAgICAgICAgY29uc29sZS5sb2coYFtBUEldIEF2YWlsYWJsZSBjb2xsZWN0aW9uczpgLCBjb2xsZWN0aW9uTmFtZXMpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIERldGVybWluZSB0aGUgY29ycmVjdCBjb2xsZWN0aW9uIG5hbWVcbiAgICAgICAgICBsZXQgYXJ0Q29sbGVjdGlvbk5hbWUgPSBcImFydHNcIjtcbiAgICAgICAgICBpZiAoIWNvbGxlY3Rpb25OYW1lcy5pbmNsdWRlcyhcImFydHNcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IGFydENvbGxlY3Rpb25zID0gY29sbGVjdGlvbk5hbWVzLmZpbHRlcihuYW1lID0+IFxuICAgICAgICAgICAgICBuYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJhcnRcIikgJiYgbmFtZSAhPT0gXCJ0b3Vyc1wiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGFydENvbGxlY3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgYXJ0Q29sbGVjdGlvbk5hbWUgPSBhcnRDb2xsZWN0aW9uc1swXTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtBUEldIFVzaW5nIFwiJHthcnRDb2xsZWN0aW9uTmFtZX1cIiBjb2xsZWN0aW9uIGluc3RlYWQgb2YgXCJhcnRzXCJgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ29udmVydCBzdHJpbmcgSURzIHRvIE9iamVjdElkcyB3aGVyZSBuZWVkZWRcbiAgICAgICAgICBjb25zdCBhcnR3b3JrSWRzID0gdG91ci5hcnR3b3Jrcy5tYXAoaWQgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPYmplY3RJZChpZCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihgW0FQSV0gQ291bGQgbm90IGNvbnZlcnQgYXJ0d29yayBJRCB0byBPYmplY3RJZDogJHtpZH0sIGVycm9yOmAsIGUubWVzc2FnZSk7XG4gICAgICAgICAgICAgIHJldHVybiBpZDsgLy8gS2VlcCBhcyBpcyBpZiBub3QgY29udmVydGlibGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNvbnNvbGUubG9nKGBbQVBJXSBDb252ZXJ0ZWQgYXJ0d29yayBJRHM6YCwgYXJ0d29ya0lkcyk7XG5cbiAgICAgICAgICBjb25zdCBhcnR3b3JrcyA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oYXJ0Q29sbGVjdGlvbk5hbWUpLmZpbmQoe1xuICAgICAgICAgICAgX2lkOiB7ICRpbjogYXJ0d29ya0lkcyB9XG4gICAgICAgICAgfSkudG9BcnJheSgpO1xuXG4gICAgICAgICAgY29uc29sZS5sb2coYFtBUEldIEZvdW5kICR7YXJ0d29ya3MubGVuZ3RofSBhcnR3b3JrczpgLCBcbiAgICAgICAgICAgIGFydHdvcmtzLm1hcChhcnQgPT4gKHsgaWQ6IGFydC5faWQsIG5hbWU6IGFydC5uYW1lIH0pKVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyBBZGQgdGhlIGFydHdvcmsgZGV0YWlscyB0byB0aGUgdG91clxuICAgICAgICAgIHRvdXIuYXJ0d29ya19kZXRhaWxzID0gYXJ0d29ya3M7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYW55IGFydHdvcmsgZGV0YWlscywgbG9nIGEgd2FybmluZ1xuICAgICAgICAgIGlmIChhcnR3b3Jrcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgW0FQSV0gTm8gYXJ0d29yayBkZXRhaWxzIGZvdW5kIGZvciB0aGUgSURzOmAsIHRvdXIuYXJ0d29ya3MpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoYXJ0d29ya3MubGVuZ3RoIDwgdG91ci5hcnR3b3Jrcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgW0FQSV0gRm91bmQgb25seSAke2FydHdvcmtzLmxlbmd0aH0gYXJ0d29ya3Mgb3V0IG9mICR7dG91ci5hcnR3b3Jrcy5sZW5ndGh9IHJlcXVlc3RlZGApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBMb2cgd2hpY2ggYXJ0d29yayBJRHMgd2VyZSBub3QgZm91bmRcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kSWRzID0gYXJ0d29ya3MubWFwKGEgPT4gYS5faWQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBjb25zdCBtaXNzaW5nSWRzID0gdG91ci5hcnR3b3Jrcy5maWx0ZXIoaWQgPT4gIWZvdW5kSWRzLmluY2x1ZGVzKGlkLnRvU3RyaW5nKCkpKTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgW0FQSV0gTWlzc2luZyBhcnR3b3JrIElEczpgLCBtaXNzaW5nSWRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFwiW0FQSV0gQ291bGQgbm90IGZldGNoIGFydHdvcmsgZGV0YWlsczpcIiwgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgLy8gQ29udGludWUgZXZlbiBpZiBhcnR3b3JrIGRldGFpbHMgY291bGQgbm90IGJlIGZldGNoZWRcbiAgICAgICAgICB0b3VyLmFydHdvcmtfZGV0YWlscyA9IFtdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhgW0FQSV0gVG91ciAke2lkfSBoYXMgbm8gYXJ0d29ya3MgdG8gZmV0Y2ggZGV0YWlscyBmb3JgKTtcbiAgICAgICAgdG91ci5hcnR3b3JrX2RldGFpbHMgPSBbXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdG91ciB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHRvdXI6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgIH1cbiAgfSBlbHNlIGlmIChyZXEubWV0aG9kID09PSBcIlBVVFwiKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgdG91cl9uYW1lLCB2aXNpYmlsaXR5LCBkZXNjcmlwdGlvbiwgY2l0eSwgYXJ0d29ya3MsIHVzZXJfaWQgfSA9IHJlcS5ib2R5O1xuICAgICAgXG4gICAgICAvLyBSZXF1aXJlIHVzZXJfaWQgZm9yIGF1dGhvcml6YXRpb25cbiAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJNaXNzaW5nIHVzZXJfaWQgaW4gcmVxdWVzdCBib2R5XCIgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1vbmdvb3NlSW5zdGFuY2UgPSBhd2FpdCBjb25uZWN0VG9EQigpO1xuICAgICAgY29uc3QgZGIgPSBtb25nb29zZUluc3RhbmNlLmNvbm5lY3Rpb24uZGI7XG5cbiAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHVzZXIgaXMgYXV0aG9yaXplZCB0byBlZGl0IHRoaXMgdG91clxuICAgICAgY29uc3QgdG91ciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ0b3Vyc1wiKS5maW5kT25lKHsgX2lkOiB0b3VyT2JqZWN0SWQgfSk7XG4gICAgICBpZiAoIXRvdXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiVG91ciBub3QgZm91bmRcIiB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ29tcGFyZSB0b3VyJ3MgdXNlcl9pZCB3aXRoIHByb3ZpZGVkIHVzZXJfaWQgZm9yIGF1dGhvcml6YXRpb25cbiAgICAgIGlmICh0b3VyLnVzZXJfaWQudG9TdHJpbmcoKSAhPT0gdXNlcl9pZC50b1N0cmluZygpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIlVuYXV0aG9yaXplZDogVGhpcyBpcyBub3QgeW91ciB0b3VyXCIgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEJ1aWxkIHVwZGF0ZSBvYmplY3Qgd2l0aCBvbmx5IHByb3ZpZGVkIGZpZWxkc1xuICAgICAgbGV0IHVwZGF0ZSA9IHt9O1xuICAgICAgaWYgKHRvdXJfbmFtZSAhPT0gdW5kZWZpbmVkKSB1cGRhdGUudG91cl9uYW1lID0gdG91cl9uYW1lO1xuICAgICAgaWYgKHZpc2liaWxpdHkgIT09IHVuZGVmaW5lZCkgdXBkYXRlLnZpc2liaWxpdHkgPSB2aXNpYmlsaXR5O1xuICAgICAgaWYgKGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHVwZGF0ZS5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgaWYgKGNpdHkgIT09IHVuZGVmaW5lZCkgdXBkYXRlLmNpdHkgPSBjaXR5O1xuICAgICAgaWYgKGFydHdvcmtzICE9PSB1bmRlZmluZWQpIHVwZGF0ZS5hcnR3b3JrcyA9IGFydHdvcmtzO1xuICAgICAgXG4gICAgICAvLyBBZGQgbGFzdF91cGRhdGVkIHRpbWVzdGFtcFxuICAgICAgdXBkYXRlLmxhc3RfdXBkYXRlZCA9IG5ldyBEYXRlKCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ0b3Vyc1wiKS51cGRhdGVPbmUoXG4gICAgICAgIHsgX2lkOiB0b3VyT2JqZWN0SWQgfSxcbiAgICAgICAgeyAkc2V0OiB1cGRhdGUgfVxuICAgICAgKTtcblxuICAgICAgaWYgKHJlc3VsdC5tb2RpZmllZENvdW50ID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIk5vIGNoYW5nZXMgbWFkZVwiIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogXCJUb3VyIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5XCIgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyB0b3VyOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcbiAgICB9XG5cbiAgfSBlbHNlIGlmIChyZXEubWV0aG9kID09PSBcIkRFTEVURVwiKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgdXNlcl9pZCB9ID0gcmVxLmJvZHk7XG4gICAgICBpZiAoIXVzZXJfaWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiTWlzc2luZyB1c2VyX2lkIGluIHJlcXVlc3QgYm9keVwiIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBtb25nb29zZUluc3RhbmNlID0gYXdhaXQgY29ubmVjdFRvREIoKTtcbiAgICAgIGNvbnN0IGRiID0gbW9uZ29vc2VJbnN0YW5jZS5jb25uZWN0aW9uLmRiO1xuXG4gICAgICAvLyBDaGVjayBpZiB0b3VyIGV4aXN0cyBhbmQgaWYgdXNlciBpcyBhdXRob3JpemVkIHRvIGRlbGV0ZVxuICAgICAgY29uc3QgdG91ciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ0b3Vyc1wiKS5maW5kT25lKHsgX2lkOiB0b3VyT2JqZWN0SWQgfSk7XG4gICAgICBpZiAoIXRvdXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiVG91ciBub3QgZm91bmRcIiB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ29tcGFyZSB1c2VyX2lkcyBmb3IgYXV0aG9yaXphdGlvblxuICAgICAgaWYgKHRvdXIudXNlcl9pZC50b1N0cmluZygpICE9PSB1c2VyX2lkLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6IFwiVW5hdXRob3JpemVkOiBUaGlzIGlzIG5vdCB5b3VyIHRvdXJcIiB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gRGVsZXRlIHRoZSB0b3VyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwidG91cnNcIikuZGVsZXRlT25lKHsgX2lkOiB0b3VyT2JqZWN0SWQgfSk7XG4gICAgICBcbiAgICAgIGlmIChyZXN1bHQuZGVsZXRlZENvdW50ID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIlRvdXIgY291bGRuJ3QgYmUgZGVsZXRlZFwiIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBbHNvIGRlbGV0ZSBhbnkgc2F2ZWQgaW5zdGFuY2VzIG9mIHRoaXMgdG91clxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZGIuY29sbGVjdGlvbihcInNhdmVkVG91cnNcIikuZGVsZXRlTWFueSh7IHRvdXJfaWQ6IHRvdXJPYmplY3RJZCB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkVycm9yIGNsZWFuaW5nIHVwIHNhdmVkIHRvdXJzOlwiLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgLy8gQ29udGludWUgZXZlbiBpZiBzYXZlZCB0b3VycyBjb3VsZCBub3QgYmUgZGVsZXRlZFxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBcIlRvdXIgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIiB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGRlbGV0aW5nIHRvdXI6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXMuc2V0SGVhZGVyKFwiQWxsb3dcIiwgW1wiR0VUXCIsIFwiUFVUXCIsIFwiREVMRVRFXCJdKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogYE1ldGhvZCAke3JlcS5tZXRob2R9IE5vdCBBbGxvd2VkYCB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNvbm5lY3RUb0RCIiwiT2JqZWN0SWQiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiaWQiLCJxdWVyeSIsInRvdXJPYmplY3RJZCIsImVyciIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsIm1ldGhvZCIsIm1vbmdvb3NlSW5zdGFuY2UiLCJkYiIsImNvbm5lY3Rpb24iLCJ0b3VyIiwiY29sbGVjdGlvbiIsImZpbmRPbmUiLCJfaWQiLCJhcnR3b3JrcyIsImxlbmd0aCIsImNvbnNvbGUiLCJsb2ciLCJjb2xsZWN0aW9ucyIsImxpc3RDb2xsZWN0aW9ucyIsInRvQXJyYXkiLCJjb2xsZWN0aW9uTmFtZXMiLCJtYXAiLCJjIiwibmFtZSIsImFydENvbGxlY3Rpb25OYW1lIiwiaW5jbHVkZXMiLCJhcnRDb2xsZWN0aW9ucyIsImZpbHRlciIsInRvTG93ZXJDYXNlIiwiYXJ0d29ya0lkcyIsImUiLCJ3YXJuIiwibWVzc2FnZSIsImZpbmQiLCIkaW4iLCJhcnQiLCJhcnR3b3JrX2RldGFpbHMiLCJmb3VuZElkcyIsImEiLCJ0b1N0cmluZyIsIm1pc3NpbmdJZHMiLCJ0b3VyX25hbWUiLCJ2aXNpYmlsaXR5IiwiZGVzY3JpcHRpb24iLCJjaXR5IiwidXNlcl9pZCIsImJvZHkiLCJ1cGRhdGUiLCJ1bmRlZmluZWQiLCJsYXN0X3VwZGF0ZWQiLCJEYXRlIiwicmVzdWx0IiwidXBkYXRlT25lIiwiJHNldCIsIm1vZGlmaWVkQ291bnQiLCJkZWxldGVPbmUiLCJkZWxldGVkQ291bnQiLCJkZWxldGVNYW55IiwidG91cl9pZCIsInNldEhlYWRlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/pages/api/tour/[id].js\n");

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftour%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftour%2F%5Bid%5D.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();